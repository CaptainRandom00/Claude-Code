# Tasks: Complete User Guide Documentation with Screenshots

**Input**: Design documents from `/specs/029-complete-user-guide/`
**Prerequisites**: plan.md, spec.md, research.md, data-model.md, contracts/

**Tests**: E2E tests for Playwright automation and component tests included

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story.

## Format: `[ID] [P?] [Story] Description`
- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (e.g., US1, US2, US3, US4)
- Include exact file paths in descriptions

## Path Conventions
- **Frontend**: `client/src/` (React components, utilities)
- **Scripts**: `scripts/` (Playwright automation)
- **Public Assets**: `public/docs/screenshots/` (static images)
- **Tests**: `tests/playwright/`, `tests/unit/`

---

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: Project initialization and directory structure for screenshot assets

- [ ] T001 Create screenshot directory structure in `public/docs/screenshots/` with 17 feature subdirectories
- [ ] T002 [P] Install Sharp dependency for image optimization (`npm install sharp`)
- [ ] T003 [P] Install Fuse.js dependency for search functionality (`npm install fuse.js`)
- [ ] T004 [P] Create screenshot metadata manifest schema at `public/docs/manifest.json` (empty initial structure)

---

## Phase 2: Foundational (Blocking Prerequisites)

**Purpose**: Core React components and utilities that ALL user stories depend on

**‚ö†Ô∏è CRITICAL**: No user story work can begin until this phase is complete

- [ ] T005 Create ScreenshotViewer component with zoom, lazy loading, and AVIF/WebP/PNG support at `client/src/components/dashboard/ScreenshotViewer.tsx`
- [ ] T006 Create UserGuideSection component with tabbed interface (Overview, Tasks, Common Tasks, Troubleshooting) at `client/src/components/dashboard/UserGuideSection.tsx`
- [ ] T007 [P] Create search utility using Fuse.js at `client/src/lib/search.ts`
- [ ] T008 [P] Add "User Guides" section to documentation.tsx navigation array at `client/src/components/dashboard/documentation.tsx`
- [ ] T009 Create renderUserGuides() function in documentation.tsx to render guide selector and UserGuideSection component

**Checkpoint**: Foundation ready - user story implementation can now begin in parallel

---

## Phase 3: User Story 1 - New User Onboarding (Priority: High) üéØ MVP

**Goal**: Visual step-by-step guides for each feature with screenshots so new users can learn independently

**Independent Test**: User can navigate to Documentation ‚Üí User Guides, select a feature (e.g., Sales Analytics), view step-by-step instructions with screenshots, and complete at least one task following the guide

### Playwright Screenshot Automation for User Story 1

- [ ] T010 [P] [US1] Create Playwright screenshot capture script at `scripts/capture-user-guide-screenshots.ts` with viewport configurations (1280x800 desktop, 768x1024 tablet)
- [ ] T011 [P] [US1] Add PNG compression logic using Sharp in capture script (target <500KB per file)
- [ ] T012 [US1] Create screenshot capture tasks for 5 priority features (Sales Analytics, Stock Profiles, Data Upload, Widget Builder, Stock Ordering)
- [ ] T013 [US1] Execute screenshot capture for priority features (17 navigation + 17 overview + 30 workflow screenshots = 64 total)
- [ ] T014 [US1] Optimize captured screenshots with Sharp (compress PNG, generate WebP/AVIF variants)

### Feature Guide Content for User Story 1

- [ ] T015 [P] [US1] Write Sales Analytics guide content (overview, getting started, 3 tasks with steps, common tasks) in `client/src/components/dashboard/documentation.tsx`
- [ ] T016 [P] [US1] Write Stock Profiles guide content (overview, getting started, 3 tasks with steps, common tasks) in `client/src/components/dashboard/documentation.tsx`
- [ ] T017 [P] [US1] Write Data Upload guide content (overview, getting started, 3 tasks with steps, common tasks) in `client/src/components/dashboard/documentation.tsx`
- [ ] T018 [P] [US1] Write Widget Builder guide content (overview, getting started, 3 tasks with steps, common tasks) in `client/src/components/dashboard/documentation.tsx`
- [ ] T019 [P] [US1] Write Stock Ordering guide content (overview, getting started, 3 tasks with steps, common tasks) in `client/src/components/dashboard/documentation.tsx`

### Component Tests for User Story 1

- [ ] T020 [P] [US1] Create unit tests for ScreenshotViewer (lazy loading, zoom, format fallback) at `tests/unit/ScreenshotViewer.test.tsx`
- [ ] T021 [P] [US1] Create unit tests for UserGuideSection (tab switching, task expansion) at `tests/unit/UserGuideSection.test.tsx`
- [ ] T022 [P] [US1] Create E2E test for user guide navigation workflow at `tests/playwright/user-guide-navigation.spec.ts`

**Checkpoint**: At this point, User Story 1 should be fully functional - user can access guides for 5 priority features with screenshots and follow step-by-step instructions

---

## Phase 4: User Story 2 - Quick Reference for Common Tasks (Priority: Medium)

**Goal**: Quick reference guides with search functionality so existing users can quickly find common workflows

**Independent Test**: User can search for "upload BRN data" and find relevant quick reference, click quick link to jump to detailed task, and keyboard shortcuts are documented

### Search Implementation for User Story 2

- [ ] T023 [US2] Create search index generation script at `scripts/generate-manifest.ts` to build searchable content from all guides
- [ ] T024 [US2] Implement search bar component with Fuse.js integration in UserGuideSection at `client/src/components/dashboard/UserGuideSection.tsx`
- [ ] T025 [US2] Add SearchResults component with grouped results (features, tasks, troubleshooting) at `client/src/components/dashboard/UserGuideSection.tsx`
- [ ] T026 [US2] Generate initial search index with 5 priority features content in `public/docs/manifest.json`

### Quick Reference Content for User Story 2

- [ ] T027 [P] [US2] Add "Common Tasks" sections to Sales Analytics guide (3-5 quick reference items with <3 steps each)
- [ ] T028 [P] [US2] Add "Common Tasks" sections to Stock Profiles guide (3-5 quick reference items with <3 steps each)
- [ ] T029 [P] [US2] Add "Common Tasks" sections to Data Upload guide (3-5 quick reference items with <3 steps each)
- [ ] T030 [P] [US2] Add "Common Tasks" sections to Widget Builder guide (3-5 quick reference items with <3 steps each)
- [ ] T031 [P] [US2] Add "Common Tasks" sections to Stock Ordering guide (3-5 quick reference items with <3 steps each)
- [ ] T032 [US2] Document keyboard shortcuts table for applicable features (where keyboard navigation exists)

### Tests for User Story 2

- [ ] T033 [P] [US2] Create E2E test for search functionality (query, results, navigation) at `tests/playwright/documentation-search.spec.ts`
- [ ] T034 [P] [US2] Create E2E test for bookmarkable URLs (direct link to specific guide and task) at `tests/playwright/user-guide-navigation.spec.ts`

**Checkpoint**: At this point, User Stories 1 AND 2 should both work independently - user can browse OR search to find guides

---

## Phase 5: User Story 3 - Troubleshooting Self-Service (Priority: Medium)

**Goal**: Troubleshooting guides with screenshots so users can resolve issues without contacting support

**Independent Test**: User encountering an error can navigate to Troubleshooting section, find their error message, view solution steps with screenshots, and resolve the issue or see contact support option

### Troubleshooting Content for User Story 3

- [ ] T035 [P] [US3] Add "Troubleshooting" section to Sales Analytics guide (5 common errors with symptoms, causes, solutions, screenshots)
- [ ] T036 [P] [US3] Add "Troubleshooting" section to Stock Profiles guide (5 common errors with symptoms, causes, solutions, screenshots)
- [ ] T037 [P] [US3] Add "Troubleshooting" section to Data Upload guide (5 common errors with symptoms, causes, solutions, screenshots)
- [ ] T038 [P] [US3] Add "Troubleshooting" section to Widget Builder guide (5 common errors with symptoms, causes, solutions, screenshots)
- [ ] T039 [P] [US3] Add "Troubleshooting" section to Stock Ordering guide (5 common errors with symptoms, causes, solutions, screenshots)

### Error State Screenshots for User Story 3

- [ ] T040 [US3] Capture error state screenshots (file upload errors, validation errors, network errors) for 5 priority features
- [ ] T041 [US3] Add error state screenshots to troubleshooting sections with annotations highlighting error messages

### Tests for User Story 3

- [ ] T042 [P] [US3] Create E2E test for troubleshooting section visibility and content at `tests/playwright/user-guide-navigation.spec.ts`

**Checkpoint**: All core user stories (US1, US2, US3) should now be independently functional with browse, search, and troubleshoot capabilities

---

## Phase 6: User Story 4 - Feature Discovery (Priority: Low)

**Goal**: Browse all 17 features with visual examples and difficulty indicators to discover new features

**Independent Test**: User can view overview page showing all 17 features, see preview screenshots and descriptions, filter by difficulty level, and navigate to related features

### Feature Overview Page for User Story 4

- [ ] T043 [US4] Create feature overview page component showing all 17 features in grid layout at `client/src/components/dashboard/documentation.tsx`
- [ ] T044 [US4] Add feature cards with preview screenshots (using first screenshot from each feature directory)
- [ ] T045 [US4] Add difficulty indicators (Beginner/Intermediate/Advanced) to each feature card based on complexity
- [ ] T046 [US4] Implement "What you can do" descriptions (2-3 sentences per feature)
- [ ] T047 [US4] Add related features cross-linking (e.g., Widget Builder ‚Üí Widget Dashboards, Widget Templates)

### Remaining Feature Content for User Story 4

- [ ] T048 [US4] Capture screenshots for remaining 12 standard/lower priority features (48 navigation + overview screenshots)
- [ ] T049 [P] [US4] Write guide content for 6 medium priority features (Dashboard, Widget Dashboards, Widget Templates, Stock Control, Sales Aggregation, Case Size Management)
- [ ] T050 [P] [US4] Write guide content for 6 lower priority features (Supplier Profiles, Waste Management, Expiry Management, Tasks & Handover, Reports, Settings)
- [ ] T051 [US4] Update search index manifest with all 17 features content

### Tests for User Story 4

- [ ] T052 [P] [US4] Create E2E test for feature overview page (grid display, difficulty filters) at `tests/playwright/user-guide-navigation.spec.ts`

**Checkpoint**: All 17 features documented with discovery interface - complete feature coverage achieved

---

## Phase 7: Polish & Cross-Cutting Concerns

**Purpose**: Performance optimization, accessibility, and validation across all user stories

- [ ] T053 [P] Implement lazy loading for screenshots with Intersection Observer (rootMargin 50px)
- [ ] T054 [P] Add BlurHash placeholders for screenshots during loading
- [ ] T055 Verify all screenshots have descriptive alt text (WCAG 2.1 AA compliance)
- [ ] T056 [P] Test keyboard navigation through all guide sections (Tab, Enter, Esc)
- [ ] T057 [P] Verify mobile/tablet responsive layout for all guides (768x1024 viewport)
- [ ] T058 Run Lighthouse audit to verify 90+ score and <2s page load
- [ ] T059 Execute manual test script with pass/fail checklist for all 17 features (per-feature + global validation)
- [ ] T060 [P] Proofread all guide content for grammar, clarity, and accuracy
- [ ] T061 Add "Last Updated" dates to each feature guide metadata
- [ ] T062 Document screenshot update process in quickstart.md

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: No dependencies - can start immediately
- **Foundational (Phase 2)**: Depends on Setup completion - BLOCKS all user stories
- **User Stories (Phase 3-6)**: All depend on Foundational phase completion
  - User Story 1 (High priority): Can start after Foundational
  - User Story 2 (Medium priority): Can start after Foundational, extends US1 with search
  - User Story 3 (Medium priority): Can start after Foundational, extends US1 with troubleshooting
  - User Story 4 (Low priority): Can start after Foundational, requires content from US1-3
- **Polish (Phase 7)**: Depends on all user stories being complete

### User Story Dependencies

- **User Story 1 (High)**: Can start after Foundational (Phase 2) - No dependencies on other stories
- **User Story 2 (Medium)**: Can start after Foundational (Phase 2) - Extends US1 with search, but US1 guides work without search
- **User Story 3 (Medium)**: Can start after Foundational (Phase 2) - Extends US1 with troubleshooting, but US1 guides work without troubleshooting
- **User Story 4 (Low)**: Can start after Foundational (Phase 2) - Adds overview page and remaining 12 features, but doesn't block core guide functionality

### Within Each User Story

- Screenshots before content (can't write guides without images)
- Content before tests (need components to exist for E2E testing)
- Tests verify story completion independently

### Parallel Opportunities

- All Setup tasks (T001-T004) can run in parallel
- All Foundational component tasks (T005-T009) marked [P] can run in parallel
- Within US1: Screenshot optimization (T011), guide content (T015-T019), tests (T020-T022) marked [P] can run in parallel once screenshots captured
- Within US2: Quick reference content (T027-T031), tests (T033-T034) marked [P] can run in parallel
- Within US3: Troubleshooting content (T035-T039), tests (T042) marked [P] can run in parallel
- Within US4: Guide content (T049-T050), tests (T052) marked [P] can run in parallel
- Polish tasks (T053-T062) can largely run in parallel

---

## Parallel Example: User Story 1

```bash
# After screenshot capture (T013) completes, launch in parallel:

# Parallel: Write guide content for all 5 priority features
Task: T015 "Write Sales Analytics guide content"
Task: T016 "Write Stock Profiles guide content"
Task: T017 "Write Data Upload guide content"
Task: T018 "Write Widget Builder guide content"
Task: T019 "Write Stock Ordering guide content"

# Parallel: Create all component tests
Task: T020 "Unit tests for ScreenshotViewer"
Task: T021 "Unit tests for UserGuideSection"
Task: T022 "E2E test for user guide navigation"
```

---

## Implementation Strategy

### MVP First (User Story 1 Only)

1. Complete Phase 1: Setup (T001-T004)
2. Complete Phase 2: Foundational (T005-T009) - CRITICAL BLOCKER
3. Complete Phase 3: User Story 1 (T010-T022)
4. **STOP and VALIDATE**: Test that users can access and follow guides for 5 priority features
5. Deploy/demo MVP with core guide functionality

**MVP Scope**: 5 priority features (Sales Analytics, Stock Profiles, Data Upload, Widget Builder, Stock Ordering) with visual step-by-step guides

### Incremental Delivery

1. Complete Setup + Foundational ‚Üí Foundation ready (T001-T009)
2. Add User Story 1 ‚Üí Test independently ‚Üí Deploy/Demo (MVP with 5 features!)
3. Add User Story 2 ‚Üí Test independently ‚Üí Deploy/Demo (add search capability)
4. Add User Story 3 ‚Üí Test independently ‚Üí Deploy/Demo (add troubleshooting)
5. Add User Story 4 ‚Üí Test independently ‚Üí Deploy/Demo (complete 17 features + discovery)
6. Polish ‚Üí Final validation ‚Üí Production release

### Parallel Team Strategy

With multiple developers:

1. Team completes Setup + Foundational together (T001-T009)
2. Once Foundational is done:
   - **Developer A**: User Story 1 screenshots + Sales Analytics + Stock Profiles content (T010-T016, T020)
   - **Developer B**: User Story 1 Data Upload + Widget Builder + Stock Ordering content (T017-T019, T021)
   - **Developer C**: User Story 2 search implementation (T023-T026, T033-T034)
3. Developers reconverge for User Story 3 & 4 content in parallel
4. Final polish tasks distributed across team

---

## Task Summary

**Total Tasks**: 62
- **Setup**: 4 tasks
- **Foundational**: 5 tasks
- **User Story 1 (High)**: 13 tasks (Screenshot automation, 5 feature guides, component tests)
- **User Story 2 (Medium)**: 12 tasks (Search implementation, quick reference content, tests)
- **User Story 3 (Medium)**: 8 tasks (Troubleshooting content, error screenshots, tests)
- **User Story 4 (Low)**: 10 tasks (Overview page, 12 remaining features, tests)
- **Polish**: 10 tasks (Performance, accessibility, validation)

**Parallel Opportunities**: 31 tasks marked [P] can run in parallel within their phase

**Independent Test Criteria**:
- **US1**: User can view and follow step-by-step guides for 5 priority features
- **US2**: User can search for tasks and use quick reference guides
- **US3**: User can find troubleshooting solutions for common errors
- **US4**: User can discover all 17 features via overview page with difficulty indicators

**Suggested MVP**: Complete through User Story 1 (5 priority features with visual guides) = 22 tasks total

---

## Notes

- [P] tasks = different files, no dependencies
- [Story] label maps task to specific user story for traceability
- Each user story should be independently completable and testable
- Screenshots are static artifacts - manual Playwright re-run when UI changes
- Screenshots committed to Git (no cloud storage complexity)
- Manual test script validates quality before final release
- Verify tests pass before marking task complete
- Commit after each task or logical group
- Stop at any checkpoint to validate story independently
- Avoid: vague tasks, same file conflicts, cross-story dependencies that break independence
